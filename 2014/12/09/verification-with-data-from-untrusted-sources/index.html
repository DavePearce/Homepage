<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta property="og:title" content="Verification with Data from Untrusted Sources"><meta name=twitter:title content="Verification with Data from Untrusted Sources"><meta property="og:url" content="https://whileydave.com/2014/12/09/verification-with-data-from-untrusted-sources/"><title>David J. Pearce
(Verification with Data from Untrusted Sources)</title><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=https://whileydave.com/css/page.css><link rel=stylesheet href=https://whileydave.com/css/menu.css><link rel=stylesheet href=https://whileydave.com/css/style.css></head><body><script>"use strict";function clearMenu(){var q=window.matchMedia("(max-width: 992px)");if(q.matches){var c=document.getElementById("menu-content");var m=document.getElementById("menu");c.style.display='none';m.style.filter='';}}
function toggleMenu(){var q=window.matchMedia("(max-width: 992px)");if(q.matches){var c=document.getElementById("menu-content");var m=document.getElementById("menu");if(c.style.display==='block'){c.style.display='none';m.style.filter='';}else{c.style.display='block';m.style.filter="brightness(0.8)";}}}
function toggleList(element){element.style.display="none";var parent=element.parentNode;var items=parent.childNodes;for(var i=0;i<items.length;++i){var item=items[i];if(item.classList&&item.classList.contains("hidden")){if(item.style.display==='block'){item.style.display="none";}else{item.style.display="block";}}}}</script><header class=topbar><div class=topbar-header onclick=clearMenu()><div class=topbar-title>Dr. David J. Pearce</div><div class=topbar-subtitle></div></div><div class=topbar-social onclick=clearMenu()><a href=https://github.com/DavePearce><i class="fa fa-github" aria-hidden=true></i></a><a href=https://twitter.com/WhileyDave><i class="fa fa-twitter" aria-hidden=true></i></a><a href=https://www.youtube.com/user/redjamjar/><i class="fa fa-youtube-play" aria-hidden=true></i></a><a href=https://www.linkedin.com/in/david-pearce-8592647/><i class="fa fa-linkedin-square" aria-hidden=true></i></a></div><div class=topbar-menu><div id=menu onclick=toggleMenu()><div id=menu-icon><img src=https://whileydave.com/images/menu.png alt=Menu></div><div id=menu-content><a href=https://whileydave.com/blog/>Blog</a>
<a href=https://whileydave.com/projects/>Projects</a>
<a href=https://whileydave.com/publications/>Publications</a>
<a href=https://whileydave.com/talks/>Talks</a>
<a href=https://whileydave.com/>Home</a></div></div></div></header><div class=container onclick=clearMenu()><div class=content><h1 class=post-title>Verification with Data from Untrusted Sources</h1><div class=post-date>Tuesday, December
9th,
2014</div><hr><p>Recently, I was listening to the latest edition of the <a href=http://illegalargument.com/episode-125>Illegal Argument podcast</a>, and it turns out they were discussing Whiley! (about 103:16 minutes in). The discussion was about how verification interacts with data from an <em>untrusted source</em> (e.g. from a database, network connection, etc). In particular, whether or not we can safely feed data directly from an untrusted source into a function which makes assumptions over that data (i.e. through preconditions or other invariants). The discussions missed a few things, which I thought would be good to clarify.</p><p>To start with, lets suppose something like this:</p><pre><code class=language-whiley data-lang=whiley>type Transaction is {
  int id,
  int amount
} where amount &gt;= 0

function balance(int id, [Transaction] records) =&gt; int:
    int b = 0
    for r in records:
        if r.id == id:
           b = b + r.amount
    // done
    return b
</code></pre><p>This function totals up the transaction amounts for a user over a given period of transactions. This is a contrived example, but illustrates the main point discussed in the podcast. Imagine feeding data directly from a database query into this function. <em>How can we be sure the necessary invariants are met?</em> (i.e. that transaction amounts aren&rsquo;t negative) Since we can&rsquo;t be sure the database enforces our invariants, this kind of information flow is unsafe.</p><p>The question now is: <em>does Whiley handle information flow from untrusted sources safely?</em> The answer, of course, is yes! That is, in Whiley, you cannot take untrusted data and feed it directly into a function which makes assumptions about it. Instead, Whiley forces you to first check whether the data meets your assumptions. In other words, Whiley requires you to validate untrusted data before moving it into the trusted zone.</p><p>At this point, the question now becomes: <em>if I have to validate all my data anyway, is Whiley actually doing anything useful?</em> Well, that depends on how long your data spends in the trusted zone. If it doesn&rsquo;t spend much time there, then there&rsquo;s probably not much benefit. In contrast, if your data spends lots of time in the trusted zone, then you can gain a lot from Whiley &mdash; namely, that it guarantees at compile-time your invariants are always met.</p><p>Anyway, food for thought!</p><hr></div></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-5582165-7','auto');ga('send','pageview');}</script></body></html>