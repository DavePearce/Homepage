<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta property="og:title" content="Why not use Structural Subtyping?"><meta name=twitter:title content="Why not use Structural Subtyping?"><meta property="og:url" content="https://whileydave.com/2010/12/13/why-not-use-structural-subtyping/"><title>David J. Pearce
(Why not use Structural Subtyping?)</title><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=https://whileydave.com/css/page.css><link rel=stylesheet href=https://whileydave.com/css/menu.css><link rel=stylesheet href=https://whileydave.com/css/style.css><link rel=stylesheet href=https://whileydave.com/css/syntax.css></head><body><script>"use strict";function clearMenu(){var e,t,n=window.matchMedia("(max-width: 992px)");n.matches&&(e=document.getElementById("menu-content"),t=document.getElementById("menu"),e.style.display="none",t.style.filter="")}function toggleMenu(){var e,t,n=window.matchMedia("(max-width: 992px)");n.matches&&(e=document.getElementById("menu-content"),t=document.getElementById("menu"),e.style.display==="block"?(e.style.display="none",t.style.filter=""):(e.style.display="block",t.style.filter="brightness(0.8)"))}function toggleList(e){e.style.display="none";for(var t,o=e.parentNode,s=o.childNodes,n=0;n<s.length;++n)t=s[n],t.classList&&t.classList.contains("hidden")&&(t.style.display==="block"?t.style.display="none":t.style.display="block")}</script><header class=topbar><div class=topbar-header onclick=clearMenu()><div class=topbar-title>Dr. David J. Pearce</div><div class=topbar-subtitle></div></div><div class=topbar-social onclick=clearMenu()><a href=https://github.com/DavePearce><i class="fa fa-github" aria-hidden=true></i></a>
<a href=https://twitter.com/WhileyDave><i class="fa fa-twitter" aria-hidden=true></i></a>
<a href=https://www.youtube.com/user/redjamjar/><i class="fa fa-youtube-play" aria-hidden=true></i></a>
<a href=https://www.linkedin.com/in/david-pearce-8592647/><i class="fa fa-linkedin-square" aria-hidden=true></i></a></div><div class=topbar-menu><div id=menu onclick=toggleMenu()><div id=menu-icon><img src=https://whileydave.com/images/menu.png alt=Menu></div><div id=menu-content><a href=https://whileydave.com/blog/>Blog</a>
<a href=https://whileydave.com/projects/>Projects</a>
<a href=https://whileydave.com/publications/>Publications</a>
<a href=https://whileydave.com/talks/>Talks</a>
<a href=https://whileydave.com/>Home</a></div></div></div></header><div class=container onclick=clearMenu()><div class=content><h1 class=post-title>Why not use Structural Subtyping?</h1><div class=post-date>Monday, December
13th,
2010</div><hr><p>Modern programming languages generally use what is known as a <a href=http://wikipedia.org/wiki/Nominal_typing>Nominal type system</a>.Â  This means types are associated with explicit names and subtyping relationships are explicit in the code (e.g. via <code>extends</code> or <code>implements</code>). This approach has the advantage of being relatively simple to implement; however, at the same time, it is quite restrictive because the way types are structured is essentially fixed.</p><p>An alternative (and far less common) approach is to use a <a href=http://wikipedia.org/wiki/Structural_type_system>Structural type system</a>. In this case, types are not associated with explicit names and subtyping relationships are not declared explicitly. Rather, types are defined by their structure and subtyping is implicit between types of related structure. Consider this simple example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-whiley data-lang=whiley><span class=line><span class=cl><span class=n>define</span> <span class=n>Point</span> <span class=n>as</span> <span class=p>{</span> <span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>define</span> <span class=n>Point3D</span> <span class=n>as</span> <span class=p>{</span> <span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y</span><span class=p>,</span> <span class=kt>int</span> <span class=n>z</span> <span class=p>}</span>
</span></span></code></pre></div><p>Whilst there is no explicit connection between <code>Point</code> and <code>Point3D</code>, there is an <em>implicit</em> one &mdash; namely, that <code>Point3D</code> is a subtype of <code>Point</code>. This means we can pass <code>Point3D</code> instances into variables of type <code>Point</code>, without any need for casting. Likewise, we can define an implicit super type of <code>Point</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-whiley data-lang=whiley><span class=line><span class=cl><span class=n>define</span> <span class=n>RealPoint</span> <span class=n>as</span> <span class=p>{</span> <span class=n>real</span> <span class=n>x</span><span class=p>,</span> <span class=n>real</span> <span class=n>y</span> <span class=p>}</span>
</span></span></code></pre></div><p>These definitions may be spread across different files, different libraries or different programs &mdash; i.e. there is no connection between them other than their structure. In fact, we might even have a different name for the same type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-whiley data-lang=whiley><span class=line><span class=cl><span class=n>define</span> <span class=n>XYpoint</span> <span class=n>as</span> <span class=p>{</span> <span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y</span> <span class=p>}</span>
</span></span></code></pre></div><p>In a structural type system, there is no difference at all between <code>Point</code> and <code>XYpoint</code> &mdash; they are the exactly same type.</p><p>The advantages of structural subtyping seem fairly evident to me. For example, suppose you&rsquo;re working with some library and want to pass your types directly into its functions. In a nominal type system, this can be a real problem unless (by chance) we can inherit or implement types from the library. In a structural type system, this is easy as we just need to make sure our types have the right fields! (Of course, encapsulation is an issue here, as we may not know exactly what fields are required).</p><p>Here&rsquo;s another take on the <a href=http://draconianoverlord.com/2010/01/17/caller-side-structural-typing.html>benefits of structural subtyping</a>. So, my question is: <em>why don&rsquo;t more languages employ structural subtyping?</em> Scala is probably the best example of one that (at least, to some degree) does &mdash; see <a href=http://debasishg.blogspot.com/2008/06/scala-to-java-smaller-inheritance.html>here</a> and <a href=http://infoscience.epfl.ch/record/138931/files/2009_structural.pdf>here</a>. Also, there is the &ldquo;M Programming Language&rdquo; (see <a href=http://www.theregister.co.uk/2008/10/10/dial_m_for_microsoft/>here</a>, <a href=http://community.bartdesmet.net/blogs/bart/archive/2009/02/16/the-m-programming-language-part-1-structural-typing.aspx>here</a> and <a href="http://www.infoq.com/presentations/Codename-M;jsessionid=C9F8F48D897CD71847E19263BB53C234">here</a> for more), which has excellent support for structural subtyping.</p><p>Finally, there has been a fair amount of academic research on structural subtyping in the context of languages like Java:</p><ul><li><p>&ldquo;<em>Integrating Nominal and Structural Subtyping</em>&rdquo;, Donna Malayeri and Jonathan Aldrich. In Proceedings of ECOOP, 2008. [<a href=http://www.cs.cmu.edu/~donna/public/ecoop08.pdf>PDF</a>]</p></li><li><p>&ldquo;<em>Whiteoak: Introducing structural typing into Java</em>&rdquo;, Joseph (Yossi) Gil and Itay Maman. In Proceedings of OOPSLA, 2008. [<a href=http://whiteoak.sourceforge.net/Whiteoak-OOPSLA08-0608.pdf>PDF</a>]</p></li></ul><hr></div></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-9MRLB1FVZX"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-9MRLB1FVZX",{anonymize_ip:!1})}</script></body></html>