<!doctype html><html lang=en><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-9MRLB1FVZX"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-9MRLB1FVZX",{anonymize_ip:!1})}</script><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta property="og:title" content="Dafny: An Automatic Program Verifier for Functional Correctness"><meta name=twitter:title content="Dafny: An Automatic Program Verifier for Functional Correctness"><meta property="og:url" content="https://whileydave.com/2010/06/07/dafny-an-automatic-program-verifier-for-functional-correctness/"><title>David J. Pearce
(Dafny: An Automatic Program Verifier for Functional Correctness)</title><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=https://whileydave.com/css/page.css><link rel=stylesheet href=https://whileydave.com/css/menu.css><link rel=stylesheet href=https://whileydave.com/css/style.css><link rel=stylesheet href=https://whileydave.com/css/syntax.css></head><body><script>"use strict";function clearMenu(){var e,t,n=window.matchMedia("(max-width: 992px)");n.matches&&(e=document.getElementById("menu-content"),t=document.getElementById("menu"),e.style.display="none",t.style.filter="")}function toggleMenu(){var e,t,n=window.matchMedia("(max-width: 992px)");n.matches&&(e=document.getElementById("menu-content"),t=document.getElementById("menu"),e.style.display==="block"?(e.style.display="none",t.style.filter=""):(e.style.display="block",t.style.filter="brightness(0.8)"))}function toggleList(e){e.style.display="none";for(var t,o=e.parentNode,s=o.childNodes,n=0;n<s.length;++n)t=s[n],t.classList&&t.classList.contains("hidden")&&(t.style.display==="block"?t.style.display="none":t.style.display="block")}</script><header class=topbar><div class=topbar-header onclick=clearMenu()><div class=topbar-title>Dr. David J. Pearce</div><div class=topbar-subtitle></div></div><div class=topbar-social onclick=clearMenu()><a href=https://github.com/DavePearce><i class="fa fa-github" aria-hidden=true></i></a>
<a href=https://twitter.com/WhileyDave><i class="fa fa-twitter" aria-hidden=true></i></a>
<a href=https://www.youtube.com/user/redjamjar/><i class="fa fa-youtube-play" aria-hidden=true></i></a>
<a href=https://www.linkedin.com/in/david-pearce-8592647/><i class="fa fa-linkedin-square" aria-hidden=true></i></a></div><div class=topbar-menu><div id=menu onclick=toggleMenu()><div id=menu-icon><img src=https://whileydave.com/images/menu.png alt=Menu></div><div id=menu-content><a href=https://whileydave.com/blog/>Blog</a>
<a href=https://whileydave.com/projects/>Projects</a>
<a href=https://whileydave.com/publications/>Publications</a>
<a href=https://whileydave.com/talks/>Talks</a>
<a href=https://whileydave.com/>Home</a></div></div></div></header><div class=container onclick=clearMenu()><div class=content><h1 class=post-title>Dafny: An Automatic Program Verifier for Functional Correctness</h1><div class=post-date>Monday, June
7th,
2010</div><hr><p>So, last week the pl reading group chose to read <a href=http://research.microsoft.com/en-us/um/people/leino/papers/krml203.pdf>this</a> paper by Rustan Leino. Ignoring the fact that a number of people in our group are interested in this area, Rustan had recently given a presentation on Dafny here (his slides are <a href=http://aswec2010.massey.ac.nz/Leino-ASWEC-2010.pdf>here</a>) and this was reason we chose this paper.  Unfortunately, I wasn&rsquo;t here to meet him and compare Whiley with Dafny, as I was in Germany at a Dagstuhl workshop on <a href="http://www.dagstuhl.de/de/programm/kalender/semhp/?semnr=10152">Relationships, Objects, Roles and Queries</a> (which was great, btw) .  C&rsquo;est la vie.</p><p>Dafny is a really interesting language aimed primarily at getting close to full verification with an automated theorem prover.  The language could be loosely called an object-oriented language.  However, there are a lot of differences.  In particular, it has a flat object hierarchy (everything extends object directly, but no other form of inheritance);  this means there is no real notion of polymorphism, as found in traditional OO languages.  On the other hand, Dafny does support unbounded integers and provides proper first class functions, as well as  sets and sequences.  So, in that sense, it&rsquo;s quite similar to Whiley.</p><p>One big difference between the two is that Dafny also aims to support <em>termination analysis</em>.  We were speculating in the reading group that this is one of the reasons why it has a flat object hierarchy.  The issue is that termination analysis in the presence of arbitrary polymorphism is difficult.  The problem lies in detecting recursive loops.  While we can require that terminating methods are all annotated with e.g. a <strong>terminates</strong> modifier, and that they follow an appropriate co-/contra-variant typing protocol, this is not enough.  We must also be able to determine when one method may recursively call itself.  In such a case, we need to identify some kind of parameter which will monotonically increase (or decrease) &mdash; to ensure we reach a <a href=http://en.wikipedia.org/wiki/Fixed_point_combinator>fix point</a>.  Dafny does this by generating a static call graph (which is easy enough in the absence of polymorphism) and, for recursive cycles, it requires use of the &ldquo;decreasing&rdquo; modifier.  This modifier identifies one (or more?) parameters which must be shown to decrease on every (recursive) iteration.</p><p>Anyway, at the moment, Dafny doesn&rsquo;t compile down into anything (e.g. CLR) and so is really just a verification tool, but in the future I&rsquo;m sure it will.  Finally, there&rsquo;s also an interesting talk I found by Rustan on termination analysis <a href=http://channel9.msdn.com/posts/Peli/The-Verification-Corner-Loop-Termination/>here</a>.  Rustan actually uses Dafny to demonstrate the ideas.</p><p><a href=http://ecn.channel9.msdn.com/o9/ch9/6/2/9/8/3/5/looptermination_ch9.mp4></a></p><hr></div></div></body></html>